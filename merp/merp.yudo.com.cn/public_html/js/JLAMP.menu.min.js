var menuIndex=0;JLAMP.menu={version:"2017.3.005",addTab:function(f,b,a){var c;if(typeof f==="object"){c=f.appID;b=f.menuName;a=f.appParams}else{c=f}if(!jq("div").is("[appID='"+c+"']")){var j="<div appID='"+c+"'><div onclick=\"menuOpen('"+c+'\');" class="gnb_tab_txt gnb_tab_txt_collapse">'+b+"</div><div onclick=\"menuClose('"+c+'\')" class="gnb_icon_close"><img src="/Image/icon_close_disable.png" onMouseOver="this.src=\'/Image/icon_close_on.png\'" onMouseOut="this.src=\'/Image/icon_close_disable.png\'"></div></div>';jq("#tabMenu").slick("slickAdd",j);var h,e,k,l,g,d;g=jq("#tabCtrl li:not([fixed])").siblings();d=g.length;k="<li tclAppID='"+c+'\'> <div class="gnb_tab_setting_txt"><a href="javascript:menuOpen(\''+c+"');\">"+b+'</a></div><div class="gnb_tab_setting_bn"><a href="javascript:menuClose(\''+c+'\')"><img src="/Image/icon_close_disable.png" onmouseover="this.src=\'/Image/icon_close_on.png\'" onmouseout="this.src=\'/Image/icon_close_disable.png\'" alt="닫기"></a></div></li>';if(d==0){h='<li role="presentation" class="divider"></li>';e='<li role="presentation" class="divider" style=\'clear:both\'></li>';jq("#tabCtrl").append(h);jq("#tabCtrl").append(k);l='<li><a href="javascript:menuCloseAll()"><span class="red_font">모두닫기</span></a></li>'}else{if(g.eq(d-2)){g.eq(d-2).before(k)}}if(e){jq("#tabCtrl").append(e)}if(l){jq("#tabCtrl").append(l)}}JLAMP.menu.getContent(f,a)},getContent:function(b,d){if(!b){return false}var e,c,a;if(typeof b==="object"){e=b.appID;d=b.appParams}else{e=b}if(jq("div").is("[id='app_"+e+"']")){jq("div[name='appContainer']").css("display","none");jq("#app_"+e).css("display","block");jq("#contentView").attr("currAppID",e);if(d){JLAMP.menu.setParams(d)}jq.each(jq(".k-chart"),function(j,h){jq(h).data("kendoChart").redraw()});jq("div[appid='"+e+"']").removeClass("gnb_tab_default").addClass("gnb_tab_active");jq("div[appid='"+e+"'] .gnb_icon_close img").attr("src","/Image/icon_close_active.png");jq("div[appid='"+e+"'] .gnb_icon_close img").attr("onmouseout",'this.src="/Image/icon_close_active.png"');jq("div[appid]:not(div[appid="+e+"])").removeClass("gnb_tab_active").addClass("gnb_tab_default");jq("div[appid]:not(div[appid="+e+"]) .gnb_icon_close img").attr("src","/Image/icon_close_disable.png");jq("div[appid]:not(div[appid="+e+"]) .gnb_icon_close img").attr("onmouseout",'this.src="/Image/icon_close_disable.png"');a=e.substr(2).toLowerCase()+"_onAppLoad";c=window[a];if(typeof c==="function"){c.apply(this)}return false}if(!jq("div").is("[id='app_"+e+"']")){JLAMP.common.loading(".layout_area","pulse")}jq.ajax({url:e,type:"get",dataType:"html",async:false,success:function(j,h,k){if(j){jq("div[name='appContainer']").css("display","none");jq("#contentView").attr("currAppID",e);if(d){JLAMP.menu.setParams(d)}jq("#contentView").append("<div id='app_"+e+"' name='appContainer'>"+j+"</div>");jq("#contentView").ready(function(){JLAMP.autoBinding.makeAll();JLAMP.modal.makeAll();a=e.substr(2).toLowerCase()+"_onAppInit";c=window[a];if(typeof c==="function"){c.apply(this)}});jq("div[appid='"+e+"']").removeClass("gnb_tab_default").addClass("gnb_tab_active");jq("div[appid='"+e+"'] .gnb_icon_close img").attr("src","/Image/icon_close_active.png");jq("div[appid='"+e+"'] .gnb_icon_close img").attr("onmouseout",'this.src="/Image/icon_close_active.png"');jq("div[appid]:not(div[appid="+e+"])").removeClass("gnb_tab_active").addClass("gnb_tab_default");jq("div[appid]:not(div[appid="+e+"]) .gnb_icon_close img").attr("src","/Image/icon_close_disable.png");jq("div[appid]:not(div[appid="+e+"]) .gnb_icon_close img").attr("onmouseout",'this.src="/Image/icon_close_disable.png"')}else{doClientMsg("실행할 앱이 없습니다.");JLAMP.menu.removeTab(e);JLAMP.menu.removeTabControl(e)}},error:function(k,h,j){doClientMsg("앱 실행 실패!");JLAMP.menu.removeTab(e);JLAMP.menu.removeTabControl(e)},complete:function(j,h){JLAMP.common.loadingClose(".layout_area")}});if(!jq("div[appid='"+e+"']").attr("formkey")){var g={workType:"OPEN",formID:e,formName:jq("div[appid='"+e+"']").children(".gnb_tab_txt").text(),formKey:""};var f=setFormAccessLog(g);jq("div[appid='"+e+"']").attr("formkey",f);jq("div[appid='"+e+"'] .gnb_tab_txt_collapse").kendoTooltip({autoHide:true,callout:false,content:function(n){var o=jq(n.target).text();var l,k,h,m;k=e.length*9;h=o.length*12;m=14;try{if(m_sessionInfo.UserCategory==="ADMIN"){o+="("+e+")";l='<div style="width:'+(h+k+m)+'px">'+o+"</div>"}else{l='<div style="width:'+(h+m)+'px">'+o+"</div>"}}catch(j){l='<div style="width:'+(h+m)+'px">'+o+"</div>"}return l}})}getFormAccessInfo(e)},removeTab:function(e){if(!e){return}var g=jq("div[appID='"+e+"']");var h=jq(".slick-track").children();var c=h.index(g);if(jq("div[appid='"+e+"'] .gnb_tab_txt_collapse").data("kendoTooltip")){jq("div[appid='"+e+"'] .gnb_tab_txt_collapse").data("kendoTooltip").destroy()}if(jq("div[appid='"+e+"']").attr("formkey")){var f={workType:"CLOSE",formID:e,formName:jq("div[appid='"+e+"']").children(".gnb_tab_txt").text(),formKey:jq("div[appid='"+e+"']").attr("formkey")};setFormAccessLog(f)}var d=h.not(g);var b=d.eq(d.length-1).attr("appID");JLAMP.menu.getContent(b);kendo.destroy(jq("#app_"+e));jq("#app_"+e).remove();jq("#tabMenu").slick("slickRemove",c);var a=e.substr(2).toLowerCase()+"_onAppClose";fn=window[a];if(typeof fn==="function"){fn.apply(this)}},removeTabControl:function(e){if(!e){return}var d,c,f;d=jq("#tabCtrl li").siblings();c=d.length;f=jq("li[tclAppID="+e+"]");if(c==5){d.not(d.eq(0)).remove()}else{if(f){jq(f).remove()}}var b=jq("#tabCtrl li:not([fixed])");if(!b.filter("[tclAppID]").length){var a=jq("#tabCtrl").children();a.filter(b).remove()}},menuCloseAll:function(){var b=jq(".slick-track").children().not("[fixed]");b.each(function(f){var d=jq(this).attr("appid");if(d){JLAMP.menu.removeTab(d)}else{jq("#tabMenu").slick("slickRemove",i)}});var c=jq("#tabCtrl li:not([fixed])");var a=jq("#tabCtrl").children();a.filter(c).remove();JLAMP.menu.getContent("Home")},setParams:function(b){var c={};var a="";if(typeof b==="object"){if(b.hasOwnProperty("appID")){a=b.appID;delete b.appID}else{a=jq("#contentView").attr("currAppID")}c=JSON.stringify(b);if(c){jq("div[appid='"+a+"']").attr("jlamp-menu-params",c)}}},getParams:function(){var a=jq("#contentView").attr("currAppID");var b="";if(a){b=jq("div[appid='"+a+"']").attr("jlamp-menu-params");if(b){b=JSON.parse(b)}}return b},clearParams:function(b){var a="";if(b){a=b}else{a=jq("#contentView").attr("currAppID")}jq("div[appid='"+a+"']").removeAttr("jlamp-menu-params")}};